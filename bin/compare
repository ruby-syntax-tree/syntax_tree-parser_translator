#!/usr/bin/env ruby
# frozen_string_literal: true

$:.unshift(File.expand_path("../lib", __dir__))
require "syntax_tree/parser_translator"
require "parser/current"

source = ARGF.read
visitor = SyntaxTree::ParserTranslator.new("(string)", 1)

stree = visitor.visit(SyntaxTree.parse(source))
parser = Parser::CurrentRuby.parse(source)

if stree == parser
  puts "Syntax trees are equivalent."
else
  warn "Syntax trees are different."

  warn "syntax_tree:"
  pp stree

  warn "parser:"
  pp parser
end
